import { useEffect } from 'react';

export const RivePlayer = () => {

  const riveLoaded = (rive) => {
    console.log(rive)
    const r = new rive.Rive({
      src: "/rivs/clean_the_car.riv",
      stateMachines: "Motion",
      canvas: document.getElementById("riveCanvas"),
      autoplay: true,
    });
  }

  const loadRivePackage = async () => {
    const script = document.createElement("script");
    script.src = 'https://unpkg.com/@rive-app/react-webgl2@4.23.1';
    script.async = true;
    script.onload = () => {
      riveLoaded(rive)
    };
    document.body.appendChild(script);
  };

  useEffect(() => {
    loadRivePackage()
  }, [])

  return (
    <canvas id="riveCanvas" />
  );
};
